<!--pages/user/myOrderCarDetail/myOrderCarDetail.wxml-->
<!-- 订单状态-未完待定 -->
<view class="car_order_status">
    <text wx:if="{{state == 0}}">订单未安排</text>
    <text wx:elif="{{state == 1}}">订单已安排</text>
    <text wx:elif="{{state == 2}}">订单已完成</text>
    <text wx:elif="{{state == 3}}">订单已付款</text>
    <text wx:elif="{{state == 4}}">订单已预约</text>
    <text wx:elif="{{state == 5}}">订单已退款</text>
</view>
<view class="hr"></view>
<view class="header">
    <view class="item first">
        <view class="item_text">出发时间</view>
        <view class="time">{{departureTime}}</view>
    </view>
    <view class="item">
        <view class="item_text">出发地</view>
        <view class="item_address">{{departurePlace}}</view>
    </view>
    <view class="item">
        <view class="item_text">目的地</view>
        <view class="item_address" wx:if="{{type==0}}">{{destination}}</view>
        <view class="item_address" wx:else>{{destination}}</view>
    </view>
</view>
<view class="passengers">
    <view class="item" wx:if="{{type==0}}">
        <view class="passen_text">乘客数</view>
        <view class="passenNum">{{travelNum}}位</view>
    </view>
    <view class="item" wx:else>
        <view class="passen_text" wx:if="{{state==4}}">预约票￥<text>{{ticketDetail.price}}</text></view>
        <view class="passen_text" wx:else>正式票￥<text>{{ticketDetail.price}}</text></view>
        <view class="passenNum">{{travelNum}}张</view> 
    </view>

    <view class="item" wx:if="{{type==0}}">
        <view class="passen_text">已支付定金</view>
        <view class="passen_price">合计 ￥<text>{{ticketDetail.deposit}}</text></view>
    </view>
    <view class="item" wx:else>
        <view class="passen_text" wx:if="{{state==4}}">已预约</view>
        <view class="passen_text" wx:else>已付款</view>
        <view class="passen_price">合计 ￥<text>{{totalPrice}}</text></view>
    </view>
</view>
<view class="responser">
    <view class="responser_text">联系人</view>
    <view class="item">
      <view class="responser_people">{{ticketDetail.passenger}}</view>
      <view class="responser_phone">{{ticketDetail.phone}}</view>
    </view>
</view>
<block wx:if="{{ticketDetail.driverName}}">
    <view class="hr"></view>
    <view class="driver_info">
        <view class="driver_info_item">司机姓名：   {{ticketDetail.driverName}}</view>
        <view class="driver_info_item">联系方式：   <text>{{ticketDetail.driverPhone}}</text></view>
        <view class="driver_info_item">车牌号码：   {{ticketDetail.licensePlateNumber}}({{ticketDetail.color}})</view>
    </view>
</block>
<block wx:if="{{type == 0}}">
    <view class="hr"></view>
    <view class="insurance" >
        <view class="insurance-item">
            <view class="insurance-item_text">购买保险</view>
            <view class="insurance-item_status" wx:if="{{ticketDetail.ifInsurance==1}}">是</view> 
            <view class="insurance-item_status" wx:else>否</view> 
        </view>
    </view>
</block>

<!-- 订单编号与时间 -->
<view class="car_order">
    <view class="hr"></view>
    <view class="car_order_item" wx:if="{{type == 0}}">订单编号：   <text>{{travelOrderId}}</text></view>
    <view class="car_order_item" wx:if="{{type == 0}}">下单时间：   {{ticketDetail.makeOrderTime}}</view>
</view>

<!-- 底部栏退款和更换时间 -->
<view class="button_footer"  wx:if="{{type == 0}}">
  <button  wx:if="{{state == 0}}" bindtap="rentalChangeTime">更换时间</button>
  <block wx:if="{{ticketDetail.tourismRefundId}}"><button bindtap="toRefundStatus">退款状态</button></block>
  <block wx:else><button bindtap="toRefund"  >申请退款</button></block>
</view>