<!--pages/user/myOrderCarDetail/myOrderCarDetail.wxml-->
<!-- 订单状态-未完待定 -->
<view class="car_order_status">
    <text wx:if="{{current == 0 }}">{{ticketDetail.carOrderStatus}}</text>
    <text wx:if="{{current == 1 && state == 0}}">订单未安排</text>
    <text wx:elif="{{current == 1 && state == 1}}">订单已安排</text>
    <text wx:elif="{{current == 1 && state == 2}}">订单已完成</text>
    <text wx:elif="{{current == 1 && state == 3}}">订单已付款</text>
    <text wx:elif="{{current == 1 && state == 4}}">订单已预约</text>
    <text wx:elif="{{current == 1 && state == 5}}">订单退款中</text>
    <text wx:elif="{{current == 1 && state == 6}}">订单已退款</text>
    <text wx:elif="{{current == 1 && state == 7}}">订单退款失败</text>
    <text wx:elif="{{current == 1 && state == 8}}">订单已取消</text>
</view>
<view class="hr"></view>
<view class="header">
    <view class="item first">
        <view class="item_text">出发时间</view>
        <view class="time" wx:if="{{current==0}}">{{ticketDetail.departureTime}}</view>
        <view class="time" wx:else>{{departureTime}}</view>
    </view>
    <view class="item">
        <view class="item_text">出发地</view>
        <view class="item_address" wx:if="{{current==0}}">{{ticketDetail.departurePlace}}</view>
        <view class="item_address"  wx:else>{{departurePlace}}</view>
    </view>
    <view class="item">
        <view class="item_text">目的地</view>
        <view class="item_address" wx:if="{{current==0}}">{{departurePlace}}</view>
        <view class="item_address" wx:else>{{destination}}</view>
    </view>
</view>
<view class="passengers">
    <view class="item" wx:if="{{current==0}}">
        <view class="passen_text" wx:if="{{type==1}}">正式票￥<text>{{ticketDetail.price}}</text></view>
        <view class="passen_text" wx:if="{{type==2}}">预约票￥<text>{{ticketDetail.price}}</text></view>
        <view class="passenNum">{{ticketNum}}张</view> 
    </view>
    <view class="item" wx:else>
        <view class="passen_text">乘客数</view>
        <view class="passenNum">{{travelNum}}位</view>
    </view>

    <view class="item" wx:if="{{current==0}}">
        <view class="passen_text" wx:if="{{type==1}}">已付款 <text wx:if="{{ticketDetail.ifInsurance==1}}"> (含保险￥{{sumDeposit}})</text></view>
        <view class="passen_text" wx:if="{{type==2}}">已预约 <text wx:if="{{ticketDetail.ifInsurance==1}}"> (含保险￥{{sumDeposit}})</text></view>
        <view class="passen_price">合计 ￥<text>{{totalPrice}}</text></view>
    </view>
    <view class="item" wx:else>
        <view class="passen_text">已支付定金</view>
        <view class="passen_price">合计 ￥<text>{{ticketDetail.deposit}}</text></view>
    </view>
</view>
<view class="responser">
    <view class="responser_text">联系人</view>
    <view class="item">
        <view class="responser_people" wx:if="{{current==0}}">{{ticketDetail.username}}</view>
        <view class="responser_people" wx:if="{{current==1}}">{{ticketDetail.passenger}}</view>
        <view class="responser_phone">{{ticketDetail.phone}}</view>
    </view>
</view>
<block wx:if="{{ticketDetail.driverName}}">
    <view class="hr"></view>
    <view class="driver_info">
        <view class="driver_info_item">司机姓名：   {{ticketDetail.driverName}}</view>
        <view class="driver_info_item">联系方式：   <text>{{ticketDetail.driverPhone}}</text></view>
        <view class="driver_info_item">车牌号码：   {{ticketDetail.licensePlateNumber}}({{ticketDetail.color}})         </view>
    </view>
</block>
<block wx:if="{{current == 1}}">
    <view class="hr"></view>
    <view class="insurance" >
        <view class="insurance-item">
            <view class="insurance-item_text">购买保险</view>
            <view class="insurance-item_status" wx:if="{{ticketDetail.ifInsurance==1}}">是</view> 
            <view class="insurance-item_status" wx:else>否</view> 
        </view>
    </view>
</block>

<!-- 订单编号与时间 -->
<view class="car_order">
    <view class="hr"></view>
    <view class="car_order_item">订单编号：   <text>{{ticketDetail.travelOrderId}}</text></view>
    <view class="car_order_item">下单时间：   {{ticketDetail.makeOrderTime}}</view>
</view>

<!-- 底部栏退款和更换时间 -->
<view class="button_footer">
    <button  wx:if="{{current == 1 && state == 0}}" bindtap="rentalChangeTime">更换时间</button>
    <block wx:if="{{ticketDetail.tourismRefundId}}"><button bindtap="toRefundStatus">退款状态</button></block>
    <block wx:else><button bindtap="toRefund"  >申请退款</button></block>
    
</view>