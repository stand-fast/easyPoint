<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.easyPoint.dao.mine.UserInfoDao">


    <!--用户信息-->
    <sql id="userInfoSql">
        uid,
        open_id as openId,
        student_id as studentId,
        avatar_url as avatarUrl,
        nick_name as nickName,
        username,
        gender,
        phone,
        grade,
        major
    </sql>

    <!--查询用户名信息-->
    <select id="findUserInfoById" parameterType="int" resultType="UserInfo">
        select <include refid="userInfoSql"/>
               from user_info where uid = #{uid}
    </select>

    <!--根据用户openId查询用户信息-->
    <select id="findUserInfoByOpenId" parameterType="String" resultType="UserInfo">
        select <include refid="userInfoSql"/> from user_info where open_id = #{openId}
    </select>

    <!--//根据用户的uid查询用户的openId-->
    <!--String findUserOpenIdByUid(int uid);-->
    <select id="findUserOpenIdByUid" parameterType="int" resultType="String">
        select open_id from user_info where uid = #{uid}
    </select>

    <!--//插入用户信息-->
    <!--int insertUserInfo(UserInfo userInfo);-->
    <insert id="insertUserInfo" keyProperty="uid" useGeneratedKeys="true" parameterType="UserInfo">
        insert into user_info (open_id, avatar_url, nick_name, gender) value (#{openId},#{avatarUrl},#{nickName},#{gender})
    </insert>

    <!--更新用户信息-->
</mapper>