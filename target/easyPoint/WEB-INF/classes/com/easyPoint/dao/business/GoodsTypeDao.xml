<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.easyPoint.dao.business.GoodsTypeDao">
    <!-- 添加商品类别 -->
    <insert id="addGoodType" parameterType="goodsType">
        INSERT INTO goods_type (goods_type_name, state, description)
        VALUES (#{goodsTypeName}, #{state}, #{description})
    </insert>
    <!-- 根据id启用&禁用某个商品类别 -->
    <update id="forbiddenOrUse">
        UPDATE goods_type
        SET state = #{flag}
        WHERE goods_type_id = #{goodTypeId}
    </update>
    <!-- 根据id修改某个类别名和描述 -->
    <update id="updateName">
        UPDATE goods_type
        <set>
            <if test="newName != null and newName != ''">goods_type_name = #{newName},</if>
            <if test="newDescription != null and newDescription != ''">description = #{newDescription}</if>
        </set>
        WHERE goods_type_id = #{goodTypeId}
    </update>
    <!-- 查询所有商品类别 -->
    <select id="findAllGoodType" parameterType="string" resultType="goodsType">
        SELECT
        <if test="inUse != null">
            goods_type_id AS goodsTypeId,
            goods_type_name AS goodsTypeName
            FROM goods_type
            WHERE state = 1
        </if>
        <if test="inUse == null">
            *
            FROM goods_type
        </if>
    </select>
    <!-- 删除商品类目 -->
    <delete id="deleteType" parameterType="string">
        DELETE
        FROM goods_type
        WHERE goods_type_id = #{goodTypeId}
    </delete>
    <!-- 查询某个类目名的类目是否存在 -->
    <select id="findByIdOrName" resultType="integer">
        SELECT state
        FROM goods_type
        <where>
            <if test="goodsTypeName != null">goods_type_name = #{goodsTypeName}</if>
            <if test="goodTypeId != null">goods_type_id = #{goodTypeId}</if>
        </where>
    </select>
</mapper>